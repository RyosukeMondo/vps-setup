<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VPS Setup Guide â€” AI-Driven Infrastructure</title>
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <style>
    /* â”€â”€â”€ CSS RESET & BASE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg:       #0d1117;
      --bg2:      #161b22;
      --bg3:      #21262d;
      --border:   #30363d;
      --green:    #39d353;
      --green2:   #26a641;
      --cyan:     #58a6ff;
      --yellow:   #e3b341;
      --red:      #f85149;
      --purple:   #bc8cff;
      --text:     #e6edf3;
      --muted:    #8b949e;
      --font:     'Courier New', Courier, monospace;
    }

    html { scroll-behavior: smooth; }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: var(--font);
      font-size: 14px;
      line-height: 1.7;
      min-height: 100vh;
    }

    /* â”€â”€â”€ SCROLLBAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: var(--bg); }
    ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

    /* â”€â”€â”€ LAYOUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .container { max-width: 960px; margin: 0 auto; padding: 0 20px; }

    /* â”€â”€â”€ SCANLINE EFFECT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background: repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(0,0,0,.08) 2px,
        rgba(0,0,0,.08) 4px
      );
      pointer-events: none;
      z-index: 9999;
    }

    /* â”€â”€â”€ HEADER / HERO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    header {
      border-bottom: 1px solid var(--border);
      padding: 48px 0 32px;
      text-align: center;
    }

    .ascii-hero {
      color: var(--green);
      font-size: 11px;
      line-height: 1.2;
      white-space: pre;
      display: inline-block;
      text-shadow: 0 0 12px rgba(57,211,83,.5);
      animation: pulse 3s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { text-shadow: 0 0 12px rgba(57,211,83,.5); }
      50%       { text-shadow: 0 0 24px rgba(57,211,83,.9); }
    }

    .hero-subtitle {
      color: var(--muted);
      margin-top: 16px;
      font-size: 13px;
      letter-spacing: 2px;
      text-transform: uppercase;
    }

    .hero-subtitle span { color: var(--cyan); }

    /* â”€â”€â”€ PROGRESS BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .progress-wrap {
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 16px 24px;
      margin: 24px 0;
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .progress-label { color: var(--muted); font-size: 12px; white-space: nowrap; }
    .progress-label span { color: var(--green); }

    .progress-track {
      flex: 1;
      height: 8px;
      background: var(--bg3);
      border-radius: 4px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--green2), var(--green));
      border-radius: 4px;
      transition: width .6s ease;
      box-shadow: 0 0 8px rgba(57,211,83,.4);
    }

    /* â”€â”€â”€ NAV TABS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .nav-tabs {
      display: flex;
      gap: 4px;
      padding: 20px 0 0;
      border-bottom: 1px solid var(--border);
      overflow-x: auto;
    }

    .nav-tab {
      padding: 8px 20px;
      background: transparent;
      border: 1px solid transparent;
      border-bottom: none;
      color: var(--muted);
      cursor: pointer;
      font-family: var(--font);
      font-size: 13px;
      border-radius: 6px 6px 0 0;
      transition: all .2s;
      white-space: nowrap;
    }

    .nav-tab:hover { color: var(--text); border-color: var(--border); }
    .nav-tab.active {
      color: var(--green);
      border-color: var(--border);
      background: var(--bg2);
      border-bottom-color: var(--bg2);
    }

    /* â”€â”€â”€ SECTIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .section { padding: 32px 0; display: none; }
    .section.active { display: block; }

    .section-title {
      font-size: 18px;
      color: var(--cyan);
      margin-bottom: 24px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .section-title::before {
      content: '>';
      color: var(--green);
      animation: blink 1s step-end infinite;
    }

    @keyframes blink { 0%,100% { opacity:1; } 50% { opacity:0; } }

    /* â”€â”€â”€ CARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .card {
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 16px;
    }

    .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
      user-select: none;
    }

    .card-title {
      color: var(--yellow);
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .phase-badge {
      background: var(--bg3);
      border: 1px solid var(--border);
      color: var(--purple);
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 10px;
    }

    .chevron {
      color: var(--muted);
      transition: transform .3s;
      font-size: 12px;
    }

    .card.collapsed .chevron { transform: rotate(-90deg); }
    .card.collapsed .card-body { display: none; }

    .card-body { margin-top: 16px; }

    /* â”€â”€â”€ CHECKLIST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .checklist { list-style: none; }

    .checklist li {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      padding: 6px 0;
      border-bottom: 1px solid rgba(48,54,61,.5);
      cursor: pointer;
      transition: color .2s;
    }

    .checklist li:last-child { border-bottom: none; }
    .checklist li:hover { color: var(--cyan); }

    .checklist li.done { color: var(--muted); text-decoration: line-through; }

    .check-box {
      width: 16px;
      height: 16px;
      border: 1px solid var(--border);
      border-radius: 3px;
      flex-shrink: 0;
      margin-top: 3px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      transition: all .2s;
    }

    .checklist li.done .check-box {
      background: var(--green2);
      border-color: var(--green);
      color: #fff;
    }

    /* â”€â”€â”€ CODE BLOCK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .code-wrap {
      position: relative;
      margin: 12px 0;
    }

    pre {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 16px;
      overflow-x: auto;
      font-size: 13px;
      line-height: 1.6;
    }

    pre code { color: var(--green); }

    .copy-btn {
      position: absolute;
      top: 8px;
      right: 8px;
      background: var(--bg3);
      border: 1px solid var(--border);
      color: var(--muted);
      padding: 4px 10px;
      border-radius: 4px;
      cursor: pointer;
      font-family: var(--font);
      font-size: 11px;
      transition: all .2s;
    }

    .copy-btn:hover { color: var(--green); border-color: var(--green); }
    .copy-btn.copied { color: var(--green); border-color: var(--green); }

    /* â”€â”€â”€ MERMAID CONTAINER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .mermaid-wrap {
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 24px;
      margin: 16px 0;
      overflow-x: auto;
      text-align: center;
    }

    .mermaid-wrap .mermaid { display: inline-block; }

    /* â”€â”€â”€ ASCII ART DIAGRAM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .ascii-diagram {
      background: var(--bg);
      border: 1px solid var(--green);
      border-radius: 6px;
      padding: 20px;
      margin: 16px 0;
      overflow-x: auto;
      color: var(--green);
      font-size: 12px;
      line-height: 1.4;
      white-space: pre;
      box-shadow: 0 0 16px rgba(57,211,83,.1) inset;
    }

    /* â”€â”€â”€ ALERT BOX â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .alert {
      border-left: 3px solid;
      padding: 12px 16px;
      border-radius: 0 6px 6px 0;
      margin: 12px 0;
      font-size: 13px;
    }

    .alert-warn  { border-color: var(--yellow); background: rgba(227,179,65,.08); color: var(--yellow); }
    .alert-info  { border-color: var(--cyan);   background: rgba(88,166,255,.08); color: var(--cyan);   }
    .alert-danger{ border-color: var(--red);    background: rgba(248,81,73,.08);  color: var(--red);    }

    /* â”€â”€â”€ RISK MATRIX â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .risk-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }

    .risk-table th, .risk-table td {
      border: 1px solid var(--border);
      padding: 10px 14px;
      text-align: left;
    }

    .risk-table th { background: var(--bg3); color: var(--cyan); }
    .risk-table tr:hover td { background: rgba(255,255,255,.02); }

    .risk-high   { color: var(--red); }
    .risk-med    { color: var(--yellow); }
    .risk-low    { color: var(--green); }
    .risk-unk    { color: var(--muted); }

    /* â”€â”€â”€ TERMINAL WINDOW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .terminal {
      background: #0a0c10;
      border: 1px solid var(--border);
      border-radius: 8px;
      margin: 16px 0;
      overflow: hidden;
    }

    .terminal-bar {
      background: var(--bg3);
      padding: 8px 12px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .dot { width: 10px; height: 10px; border-radius: 50%; }
    .dot-r { background: #ff5f57; }
    .dot-y { background: #febc2e; }
    .dot-g { background: #28c840; }

    .terminal-title { margin-left: 8px; color: var(--muted); font-size: 11px; }

    .terminal-body {
      padding: 16px;
      font-size: 13px;
      line-height: 1.8;
    }

    .t-prompt { color: var(--green); }
    .t-cmd    { color: var(--text); }
    .t-out    { color: var(--muted); }
    .t-comment{ color: #555; }

    /* â”€â”€â”€ TOOLTIP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    [data-tip] {
      position: relative;
      cursor: help;
      border-bottom: 1px dashed var(--muted);
    }

    [data-tip]::after {
      content: attr(data-tip);
      position: absolute;
      bottom: 120%;
      left: 50%;
      transform: translateX(-50%);
      background: var(--bg3);
      border: 1px solid var(--border);
      color: var(--text);
      padding: 6px 10px;
      border-radius: 4px;
      font-size: 11px;
      white-space: nowrap;
      pointer-events: none;
      opacity: 0;
      transition: opacity .2s;
      z-index: 100;
    }

    [data-tip]:hover::after { opacity: 1; }

    /* â”€â”€â”€ FOOTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    footer {
      border-top: 1px solid var(--border);
      padding: 24px 0;
      text-align: center;
      color: var(--muted);
      font-size: 12px;
    }

    footer a { color: var(--cyan); text-decoration: none; }

    /* â”€â”€â”€ RESPONSIVE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    @media(max-width:600px) {
      .ascii-hero { font-size: 8px; }
      pre { font-size: 11px; }
    }
  </style>
</head>
<body>

<!-- â”€â”€â”€ HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<header>
  <div class="container">
    <pre class="ascii-hero">
 __   __ ____  ____     ____  _____ ______ _    _ ____
 \ \ / /|  _ \/ ___|   / ___|| ____|_  __|| |  | |  _ \
  \ V / | |_) \___ \   \___ \|  _|   | |  | |  | | |_) |
   | |  |  __/ ___) |   ___) | |___  | |  | |__| |  __/
   |_|  |_|   |____/   |____/|_____| |_|   \____/|_|

   â”€â”€â”€ AI-DRIVEN VPS INFRASTRUCTURE AUTOMATION GUIDE â”€â”€â”€
    </pre>
    <p class="hero-subtitle">
      Phase-by-phase guide Â·
      <span>Claude Code</span> Â·
      XServer VPS Â·
      Caddy Reverse Proxy
    </p>

    <div class="progress-wrap" id="globalProgress">
      <span class="progress-label">MISSION PROGRESS&nbsp;<span id="pct">0%</span></span>
      <div class="progress-track">
        <div class="progress-fill" id="progressFill" style="width:0%"></div>
      </div>
      <span class="progress-label"><span id="doneCount">0</span>/<span id="totalCount">0</span> tasks</span>
    </div>
  </div>
</header>

<!-- â”€â”€â”€ NAV TABS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="container">
  <nav class="nav-tabs" id="navTabs">
    <button class="nav-tab active" data-target="overview">[ OVERVIEW ]</button>
    <button class="nav-tab" data-target="phase1">[ PHASE 1 Â· LOCAL ]</button>
    <button class="nav-tab" data-target="phase2">[ PHASE 2 Â· CLAUDE ]</button>
    <button class="nav-tab" data-target="phase3">[ PHASE 3 Â· INFRA ]</button>
    <button class="nav-tab" data-target="phase4">[ PHASE 4 Â· DEPLOY ]</button>
    <button class="nav-tab" data-target="risks">[ RISK MATRIX ]</button>
  </nav>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!--  OVERVIEW                                                               -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="container">
<section class="section active" id="overview">
  <h2 class="section-title">System Architecture Overview</h2>

  <!-- ASCII architecture diagram -->
  <div class="ascii-diagram">
  LOCAL MACHINE                 INTERNET                  XSERVER VPS
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚       â”‚              â”‚          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚  Claude Code  â”‚â”€â”€â”¼â”€â”€SSHâ”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â–¶â”‚  Ubuntu 24.04 (root)  â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚       â”‚              â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚          â”‚          â”‚       â”‚  DNS A Recordâ”‚          â”‚             â”‚                â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”‚       â”‚  domain.xvps â”‚          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚   ~/.ssh/     â”‚  â”‚       â”‚  .jp â†’ VPS IPâ”‚          â”‚  â”‚   Docker Engine        â”‚  â”‚
  â”‚  â”‚  xvps.pem     â”‚  â”‚       â”‚              â”‚          â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
  â”‚  â”‚  id_ed25519   â”‚  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  â”‚  â”‚  Caddy :80/:443 â”‚   â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                 â”‚  â”‚  â”‚  (TLS auto cert)â”‚   â”‚  â”‚
  â”‚                     â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚       â”‚   GitHub     â”‚          â”‚  â”‚           â”‚reverse     â”‚  â”‚
  â”‚  â”‚ ~/.claude/    â”‚  â”‚       â”‚   Pages /    â”‚          â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
  â”‚  â”‚  skills/      â”‚  â”‚       â”‚   Actions    â”‚          â”‚  â”‚  â”‚  Nginx :8080    â”‚   â”‚  â”‚
  â”‚  â”‚  CLAUDE.md    â”‚  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  â”‚  â”‚  (sample app)  â”‚   â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                 â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  </div>

  <!-- Mermaid critical path flowchart -->
  <h3 style="color:var(--purple); margin:24px 0 12px; font-size:14px;">
    â—† Critical Path Â· 4-Phase Execution Plan
  </h3>
  <div class="mermaid-wrap">
    <div class="mermaid">
flowchart TD
    A([ğŸ–¥ï¸ START]) --> P1

    subgraph P1["PHASE 1 Â· Local Foundation"]
        direction TB
        P1A[Install Homebrew / apt] --> P1B[Install git, gh, node, docker]
        P1B --> P1C[Install mise Â· Python version mgr]
        P1C --> P1D[gh auth login Â· GitHub SSH key]
    end

    subgraph P2["PHASE 2 Â· Claude Code"]
        direction TB
        P2A[npm install -g @anthropic-ai/claude-code] --> P2B[Set alias in .zshrc/.bashrc]
        P2B --> P2C[Create ~/.claude/skills/vps-caddy-proxy.md]
    end

    subgraph P3["PHASE 3 Â· Infrastructure"]
        direction TB
        P3A[Contract XServer VPS Â· Ubuntu 24.04] --> P3B[Download xvps.pem SSH key]
        P3B --> P3C[Place key Â· chmod 600]
        P3C --> P3D[Create server.md with VPS info]
    end

    subgraph P4["PHASE 4 Â· AI Provisioning"]
        direction TB
        P4A[Run: claude] --> P4B[Prompt: read server.md]
        P4B --> P4C[Create sudo user + authorized_keys]
        P4C --> P4D[Install Docker + Docker Compose]
        P4D --> P4E[Deploy Caddy + Nginx via Docker]
        P4E --> P4F([âœ… HTTPS site LIVE])
    end

    P1 --> P2
    P2 --> P3
    P3 --> P4

    style P1 fill:#1a2332,stroke:#58a6ff,color:#e6edf3
    style P2 fill:#1a2332,stroke:#bc8cff,color:#e6edf3
    style P3 fill:#1a2332,stroke:#e3b341,color:#e6edf3
    style P4 fill:#1a2332,stroke:#39d353,color:#e6edf3
    style A fill:#21262d,stroke:#39d353,color:#39d353
    style P4F fill:#21262d,stroke:#39d353,color:#39d353
    </div>
  </div>

  <!-- Mermaid dependency graph -->
  <h3 style="color:var(--purple); margin:24px 0 12px; font-size:14px;">
    â—† Dependency Graph Â· What blocks what?
  </h3>
  <div class="mermaid-wrap">
    <div class="mermaid">
graph LR
    VPS[XServer VPS running]
    SSH[SSH key in ~/.ssh/]
    GH[gh auth login done]
    NODE[Node.js installed]
    CC[Claude Code installed]
    SMDF[server.md created]
    SKILL[skills/vps-caddy-proxy.md]
    REMOTE[SSH to VPS works]
    DOCKER[Docker on VPS]
    CADDY[Caddy container up]
    LIVE[ğŸŒ HTTPS site live]

    SSH --> REMOTE
    VPS --> REMOTE
    REMOTE --> DOCKER
    DOCKER --> CADDY
    CADDY --> LIVE

    NODE --> CC
    GH --> SSH
    CC --> REMOTE
    SMDF --> REMOTE
    SKILL --> CADDY

    style LIVE fill:#21262d,stroke:#39d353,color:#39d353
    style CC  fill:#1a2332,stroke:#bc8cff,color:#e6edf3
    style VPS fill:#1a2332,stroke:#e3b341,color:#e6edf3
    </div>
  </div>

</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!--  PHASE 1                                                                -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="section" id="phase1">
  <h2 class="section-title">Phase 1 Â· Local Foundation &amp; Tooling</h2>

  <div class="alert alert-info">
    â„¹ï¸  All steps in this phase run on your <strong>local machine</strong> (Mac / Windows WSL2).
    Nothing touches the VPS yet.
  </div>

  <!-- Step 1 -->
  <div class="card" id="card-p1-1">
    <div class="card-header" onclick="toggleCard('card-p1-1')">
      <span class="card-title">
        <span class="phase-badge">STEP 1</span>
        Package Manager
      </span>
      <span class="chevron">â–¼</span>
    </div>
    <div class="card-body">
      <ul class="checklist" id="cl-p1-1">
        <li data-id="p1-1-a" onclick="toggleCheck(this)">
          <span class="check-box"></span>
          Mac: Homebrew installed (<code>/bin/bash -c "$(curl -fsSL https://brew.sh/install.sh)"</code>)
        </li>
        <li data-id="p1-1-b" onclick="toggleCheck(this)">
          <span class="check-box"></span>
          Windows: WSL2 enabled with Ubuntu distro (or Winget available)
        </li>
      </ul>
    </div>
  </div>

  <!-- Step 2 -->
  <div class="card" id="card-p1-2">
    <div class="card-header" onclick="toggleCard('card-p1-2')">
      <span class="card-title">
        <span class="phase-badge">STEP 2</span>
        Install Core Tools
      </span>
      <span class="chevron">â–¼</span>
    </div>
    <div class="card-body">
      <ul class="checklist" id="cl-p1-2">
        <li data-id="p1-2-a" onclick="toggleCheck(this)">
          <span class="check-box"></span>
          git, gh, node, docker installed
        </li>
        <li data-id="p1-2-b" onclick="toggleCheck(this)">
          <span class="check-box"></span>
          Docker Desktop launched and running
        </li>
      </ul>
      <div class="terminal">
        <div class="terminal-bar">
          <div class="dot dot-r"></div>
          <div class="dot dot-y"></div>
          <div class="dot dot-g"></div>
          <span class="terminal-title">Terminal â€” Mac</span>
        </div>
        <div class="terminal-body">
          <div><span class="t-comment"># Install all core tools in one shot</span></div>
          <div><span class="t-prompt">$ </span><span class="t-cmd">brew install git gh node docker</span></div>
          <div><span class="t-out">... installing ...</span></div>
          <div><span class="t-prompt">$ </span><span class="t-cmd">docker --version &amp;&amp; node --version &amp;&amp; gh --version</span></div>
          <div><span class="t-out">Docker version 26.x.x, Node.js v22.x.x, gh version 2.x.x</span></div>
        </div>
      </div>
      <div class="code-wrap">
        <button class="copy-btn" onclick="copyCode(this)">COPY</button>
        <pre><code>brew install git gh node docker</code></pre>
      </div>
    </div>
  </div>

  <!-- Step 3 -->
  <div class="card" id="card-p1-3">
    <div class="card-header" onclick="toggleCard('card-p1-3')">
      <span class="card-title">
        <span class="phase-badge">STEP 3</span>
        Python Version Management with <span data-tip="Multi-runtime version manager â€” replaces pyenv, nvm, rbenv">mise</span>
      </span>
      <span class="chevron">â–¼</span>
    </div>
    <div class="card-body">
      <div class="alert alert-warn">
        âš ï¸  Installing multiple Python versions directly under the OS causes dependency hell.
        Use <strong>mise</strong> (or pyenv) to isolate them.
      </div>

      <!-- Mermaid: pyenv vs mise vs system -->
      <div class="mermaid-wrap">
        <div class="mermaid">
graph TD
    subgraph BAD ["âŒ BAD â€” OS-level install"]
        OS[macOS / Ubuntu] --> P39[python3.9 overwrites PATH]
        OS --> P311[python3.11 overwrites PATH]
        P39 -.conflicts.-> P311
    end
    subgraph GOOD ["âœ… GOOD â€” mise isolated"]
        M[mise] --> E1["project-A â†’ python@3.9"]
        M --> E2["project-B â†’ python@3.11"]
        M --> E3["project-C â†’ python@3.13"]
        E1 -.no conflict.- E2
    end

    style BAD fill:#2d1a1a,stroke:#f85149
    style GOOD fill:#1a2d1a,stroke:#39d353
        </div>
      </div>

      <ul class="checklist" id="cl-p1-3">
        <li data-id="p1-3-a" onclick="toggleCheck(this)">
          <span class="check-box"></span>
          mise installed
        </li>
        <li data-id="p1-3-b" onclick="toggleCheck(this)">
          <span class="check-box"></span>
          Python 3.9â€“3.13 installed via mise
        </li>
      </ul>
      <div class="code-wrap">
        <button class="copy-btn" onclick="copyCode(this)">COPY</button>
        <pre><code>brew install mise
mise use --global python@3.9 python@3.10 python@3.11 python@3.12 python@3.13</code></pre>
      </div>
    </div>
  </div>

  <!-- Step 4 -->
  <div class="card" id="card-p1-4">
    <div class="card-header" onclick="toggleCard('card-p1-4')">
      <span class="card-title">
        <span class="phase-badge">STEP 4</span>
        GitHub Authentication &amp; SSH Key
      </span>
      <span class="chevron">â–¼</span>
    </div>
    <div class="card-body">

      <!-- Sequence diagram -->
      <div class="mermaid-wrap">
        <div class="mermaid">
sequenceDiagram
    actor You
    participant gh as gh CLI
    participant GitHub
    participant SSH as ~/.ssh/id_ed25519

    You->>gh: gh auth login
    gh->>You: Choose: SSH or HTTPS?
    You->>gh: SSH
    gh->>SSH: Generate ed25519 keypair
    SSH-->>gh: Public key ready
    gh->>GitHub: Upload public key via API
    GitHub-->>gh: Key registered âœ…
    gh-->>You: Authenticated as @username
        </div>
      </div>

      <ul class="checklist" id="cl-p1-4">
        <li data-id="p1-4-a" onclick="toggleCheck(this)">
          <span class="check-box"></span>
          <code>gh auth login</code> completed â€” chose SSH protocol
        </li>
        <li data-id="p1-4-b" onclick="toggleCheck(this)">
          <span class="check-box"></span>
          <code>~/.ssh/id_ed25519.pub</code> visible on GitHub â†’ Settings â†’ SSH Keys
        </li>
      </ul>
      <div class="code-wrap">
        <button class="copy-btn" onclick="copyCode(this)">COPY</button>
        <pre><code>gh auth login
# â†’ GitHub.com â†’ SSH â†’ Generate new SSH key â†’ authenticate via browser</code></pre>
      </div>
    </div>
  </div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!--  PHASE 2                                                                -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="section" id="phase2">
  <h2 class="section-title">Phase 2 Â· Claude Code Setup</h2>

  <div class="card" id="card-p2-1">
    <div class="card-header" onclick="toggleCard('card-p2-1')">
      <span class="card-title">
        <span class="phase-badge">STEP 1</span>
        Install Claude Code
      </span>
      <span class="chevron">â–¼</span>
    </div>
    <div class="card-body">
      <ul class="checklist" id="cl-p2-1">
        <li data-id="p2-1-a" onclick="toggleCheck(this)">
          <span class="check-box"></span>
          Node.js â‰¥ 18 confirmed (<code>node --version</code>)
        </li>
        <li data-id="p2-1-b" onclick="toggleCheck(this)">
          <span class="check-box"></span>
          <code>claude --version</code> returns successfully
        </li>
      </ul>
      <div class="code-wrap">
        <button class="copy-btn" onclick="copyCode(this)">COPY</button>
        <pre><code>npm install -g @anthropic-ai/claude-code
claude --version</code></pre>
      </div>
    </div>
  </div>

  <div class="card" id="card-p2-2">
    <div class="card-header" onclick="toggleCard('card-p2-2')">
      <span class="card-title">
        <span class="phase-badge">STEP 2</span>
        Alias Configuration
        <span style="color:var(--red); font-size:11px; margin-left:8px;">âš  RISK ACCEPTED</span>
      </span>
      <span class="chevron">â–¼</span>
    </div>
    <div class="card-body">
      <div class="alert alert-danger">
        âš¡ <strong>--dangerously-skip-permissions</strong>: This alias means Claude Code can execute
        <em>any</em> command without prompting. Mitigate with: commit before running,
        add "list commands before executing" to your prompt.
      </div>
      <ul class="checklist" id="cl-p2-2">
        <li data-id="p2-2-a" onclick="toggleCheck(this)">
          <span class="check-box"></span>
          Alias added to <code>~/.zshrc</code> or <code>~/.bashrc</code>
        </li>
        <li data-id="p2-2-b" onclick="toggleCheck(this)">
          <span class="check-box"></span>
          Shell reloaded: <code>source ~/.zshrc</code>
        </li>
      </ul>
      <div class="code-wrap">
        <button class="copy-btn" onclick="copyCode(this)">COPY</button>
        <pre><code># Add to ~/.zshrc or ~/.bashrc
alias claude="claude --dangerously-skip-permissions"
source ~/.zshrc</code></pre>
      </div>
    </div>
  </div>

  <div class="card" id="card-p2-3">
    <div class="card-header" onclick="toggleCard('card-p2-3')">
      <span class="card-title">
        <span class="phase-badge">STEP 3</span>
        Create Global Skills Directory
      </span>
      <span class="chevron">â–¼</span>
    </div>
    <div class="card-body">
      <div class="alert alert-info">
        ğŸ’¡ Skills are reusable knowledge files that Claude Code reads automatically.
        Think of them as your personal DevOps playbook.
      </div>

      <div class="ascii-diagram">
  ~/.claude/
  â”œâ”€â”€ CLAUDE.md               â† global system instructions for all projects
  â””â”€â”€ skills/
      â””â”€â”€ vps-caddy-proxy.md  â† Caddy + Docker Compose definition (write your template here)

  vps-caddy-proxy.md should contain:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  # Caddy Reverse Proxy â€” Docker Compose Template   â”‚
  â”‚                                                    â”‚
  â”‚  ## docker-compose.yml                             â”‚
  â”‚  services:                                         â”‚
  â”‚    caddy:                                          â”‚
  â”‚      image: caddy:alpine                           â”‚
  â”‚      ports: ["80:80","443:443"]                    â”‚
  â”‚      volumes: [./Caddyfile:/etc/caddy/Caddyfile]   â”‚
  â”‚    web:                                            â”‚
  â”‚      image: nginx:alpine                           â”‚
  â”‚      expose: ["80"]                                â”‚
  â”‚                                                    â”‚
  â”‚  ## Caddyfile                                      â”‚
  â”‚  {DOMAIN} {                                        â”‚
  â”‚    reverse_proxy web:80                            â”‚
  â”‚  }                                                 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      </div>

      <ul class="checklist" id="cl-p2-3">
        <li data-id="p2-3-a" onclick="toggleCheck(this)">
          <span class="check-box"></span>
          <code>~/.claude/skills/</code> directory created
        </li>
        <li data-id="p2-3-b" onclick="toggleCheck(this)">
          <span class="check-box"></span>
          <code>vps-caddy-proxy.md</code> written with Caddy + Nginx Docker Compose template
        </li>
      </ul>
      <div class="code-wrap">
        <button class="copy-btn" onclick="copyCode(this)">COPY</button>
        <pre><code>mkdir -p ~/.claude/skills
touch ~/.claude/skills/vps-caddy-proxy.md
# Then edit with your preferred editor and paste the Docker Compose template</code></pre>
      </div>
    </div>
  </div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!--  PHASE 3                                                                -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="section" id="phase3">
  <h2 class="section-title">Phase 3 Â· Infrastructure Procurement</h2>

  <div class="card" id="card-p3-1">
    <div class="card-header" onclick="toggleCard('card-p3-1')">
      <span class="card-title">
        <span class="phase-badge">STEP 1</span>
        Contract XServer VPS
      </span>
      <span class="chevron">â–¼</span>
    </div>
    <div class="card-body">
      <ul class="checklist" id="cl-p3-1">
        <li data-id="p3-1-a" onclick="toggleCheck(this)">
          <span class="check-box"></span>
          Plan selected â€” Ubuntu 24.04 LTS chosen as OS
        </li>
        <li data-id="p3-1-b" onclick="toggleCheck(this)">
          <span class="check-box"></span>
          SSH key option: "æ–°ã—ãç”Ÿæˆã™ã‚‹" â†’ downloaded <code>xvps.pem</code>
        </li>
        <li data-id="p3-1-c" onclick="toggleCheck(this)">
          <span class="check-box"></span>
          VPS IP address noted
        </li>
      </ul>
    </div>
  </div>

  <div class="card" id="card-p3-2">
    <div class="card-header" onclick="toggleCard('card-p3-2')">
      <span class="card-title">
        <span class="phase-badge">STEP 2</span>
        Configure Local SSH Access
      </span>
      <span class="chevron">â–¼</span>
    </div>
    <div class="card-body">
      <ul class="checklist" id="cl-p3-2">
        <li data-id="p3-2-a" onclick="toggleCheck(this)">
          <span class="check-box"></span>
          <code>xvps.pem</code> moved to <code>~/.ssh/xvps.pem</code>
        </li>
        <li data-id="p3-2-b" onclick="toggleCheck(this)">
          <span class="check-box"></span>
          Permissions set: <code>chmod 600 ~/.ssh/xvps.pem</code>
        </li>
        <li data-id="p3-2-c" onclick="toggleCheck(this)">
          <span class="check-box"></span>
          Test connection successful: <code>ssh -i ~/.ssh/xvps.pem root@&lt;VPS_IP&gt;</code>
        </li>
      </ul>
      <div class="code-wrap">
        <button class="copy-btn" onclick="copyCode(this)">COPY</button>
        <pre><code>mv ~/Downloads/xvps.pem ~/.ssh/
chmod 600 ~/.ssh/xvps.pem
ssh -i ~/.ssh/xvps.pem root@&lt;YOUR_VPS_IP&gt;</code></pre>
      </div>
    </div>
  </div>

  <div class="card" id="card-p3-3">
    <div class="card-header" onclick="toggleCard('card-p3-3')">
      <span class="card-title">
        <span class="phase-badge">STEP 3</span>
        Create <code>server.md</code> â€” Declarative Config File
      </span>
      <span class="chevron">â–¼</span>
    </div>
    <div class="card-body">
      <div class="alert alert-info">
        ğŸ“‹ This file is the <strong>Single Source of Truth</strong> for your VPS.
        Claude Code reads it to know where and how to connect.
      </div>
      <div class="ascii-diagram">
  server.md (example)
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # Server Configuration

  ## Connection
  - IP:       203.0.113.42
  - User:     root
  - SSH Key:  ~/.ssh/xvps.pem
  - Port:     22

  ## Domain
  - Subdomain: my-project.xvps.jp
  - DNS:       A record â†’ 203.0.113.42

  ## Target Stack
  - OS:       Ubuntu 24.04 LTS
  - Runtime:  Docker + Docker Compose
  - Proxy:    Caddy (auto TLS)
  - App:      Nginx (sample page)
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      </div>
      <ul class="checklist" id="cl-p3-3">
        <li data-id="p3-3-a" onclick="toggleCheck(this)">
          <span class="check-box"></span>
          <code>server.md</code> created in project root with real IP and domain
        </li>
        <li data-id="p3-3-b" onclick="toggleCheck(this)">
          <span class="check-box"></span>
          DNS A record pointing to VPS IP (check with <code>dig domain.xvps.jp A</code>)
        </li>
      </ul>
    </div>
  </div>

  <!-- DNS propagation warning -->
  <div class="card" id="card-p3-dns">
    <div class="card-header" onclick="toggleCard('card-p3-dns')">
      <span class="card-title">
        <span class="phase-badge" style="border-color:var(--yellow); color:var(--yellow)">âš  WAIT</span>
        DNS Propagation â€” Critical Timing Issue
      </span>
      <span class="chevron">â–¼</span>
    </div>
    <div class="card-body">
      <div class="mermaid-wrap">
        <div class="mermaid">
sequenceDiagram
    participant You
    participant DNS as DNS Registrar
    participant Resolvers as Global DNS Resolvers
    participant Caddy
    participant LE as Let's Encrypt

    You->>DNS: Set A record â†’ VPS IP
    Note over DNS,Resolvers: TTL propagation: 5minâ€“48h
    You->>Caddy: docker compose up
    Caddy->>LE: Request TLS certificate for domain
    LE->>Resolvers: DNS lookup to verify ownership
    alt DNS NOT propagated yet
        Resolvers-->>LE: NXDOMAIN / wrong IP
        LE-->>Caddy: âŒ Certificate issuance FAILED
        Caddy-->>You: Process crashes
    else DNS propagated âœ…
        Resolvers-->>LE: Correct VPS IP
        LE-->>Caddy: âœ… Certificate issued
        Caddy-->>You: HTTPS serving on 443
    end
        </div>
      </div>
      <div class="alert alert-warn">
        â³ <strong>Before starting Caddy</strong>, verify DNS with:
        <code>dig +short domain.xvps.jp A</code> â€” must return your VPS IP.
      </div>
    </div>
  </div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!--  PHASE 4                                                                -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="section" id="phase4">
  <h2 class="section-title">Phase 4 Â· AI-Driven Remote Provisioning</h2>

  <div class="alert alert-info">
    ğŸ¤– This phase is <strong>delegated to Claude Code</strong>.
    You provide the prompt; Claude executes all remote commands.
  </div>

  <div class="card" id="card-p4-1">
    <div class="card-header" onclick="toggleCard('card-p4-1')">
      <span class="card-title">
        <span class="phase-badge">STEP 1</span>
        Launch Claude Code
      </span>
      <span class="chevron">â–¼</span>
    </div>
    <div class="card-body">
      <div class="code-wrap">
        <button class="copy-btn" onclick="copyCode(this)">COPY</button>
        <pre><code>cd /path/to/your/project  # where server.md lives
claude</code></pre>
      </div>
    </div>
  </div>

  <div class="card" id="card-p4-2">
    <div class="card-header" onclick="toggleCard('card-p4-2')">
      <span class="card-title">
        <span class="phase-badge">STEP 2</span>
        The Master Prompt
      </span>
      <span class="chevron">â–¼</span>
    </div>
    <div class="card-body">
      <div class="code-wrap">
        <button class="copy-btn" onclick="copyCode(this)">COPY</button>
        <pre><code>server.md ã‚’èª­ã¿è¾¼ã¿ã€è¨˜è¼‰ã•ã‚ŒãŸVPSã¸SSHæ¥ç¶šã—ã¦ãã ã•ã„ã€‚
æ¥ç¶šå¾Œã€ä»¥ä¸‹ã®ã‚¿ã‚¹ã‚¯ã‚’é †ã«å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚
å®Ÿè¡Œå‰ã«å®Ÿè¡Œäºˆå®šã®ã‚³ãƒãƒ³ãƒ‰ä¸€è¦§ã‚’å‡ºåŠ›ã—ã€ç¢ºèªã‚’æ±‚ã‚ã¦ãã ã•ã„ã€‚

1. æ–°è¦ã®ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã—ã€sudoæ¨©é™ã‚’ä»˜ä¸ã—ã€
   ãƒ­ãƒ¼ã‚«ãƒ«ã® ~/.ssh/id_ed25519.pub ã‚’æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®
   authorized_keys ã«è¿½åŠ ã—ã¦ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãªã—ã§SSHæ¥ç¶šã§ãã‚‹ã‚ˆã†ã«ã—ã¦ãã ã•ã„ã€‚

2. Ubuntu 24.04ä¸Šã«DockerãŠã‚ˆã³Docker Composeã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚

3. ~/.claude/skills/vps-caddy-proxy.md ã‚’èª­ã¿è¾¼ã¿ã€VPSä¸Šã«Caddyã‚’ç”¨ã„ãŸ
   ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·ç’°å¢ƒã¨ã€ã‚µãƒ³ãƒ—ãƒ«ã®Webãƒšãƒ¼ã‚¸ï¼ˆNginxï¼‰ã®Dockerã‚³ãƒ³ãƒ†ãƒŠã‚’
   æ§‹ç¯‰ã—ã€èµ·å‹•ã—ã¦ãã ã•ã„ã€‚ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ã¯ server.md ã®ã‚‚ã®ã‚’é©ç”¨ã—ã¦ãã ã•ã„ã€‚</code></pre>
      </div>

      <!-- What Claude does â€” sequence diagram -->
      <div class="mermaid-wrap">
        <div class="mermaid">
sequenceDiagram
    actor You
    participant CC as Claude Code
    participant VPS as XServer VPS
    participant GH as GitHub

    You->>CC: Paste master prompt
    CC->>CC: Read server.md
    CC->>CC: Read ~/.ssh/xvps.pem
    CC->>VPS: SSH connect as root
    CC->>VPS: useradd deploy + sudoers
    CC->>GH: Fetch ~/.ssh/id_ed25519.pub
    CC->>VPS: Append to deploy/.ssh/authorized_keys
    CC->>VPS: apt install docker.io docker-compose
    CC->>CC: Read ~/.claude/skills/vps-caddy-proxy.md
    CC->>VPS: Write docker-compose.yml + Caddyfile
    CC->>VPS: docker compose up -d
    VPS-->>CC: Containers healthy âœ…
    CC-->>You: ğŸŒ https://domain.xvps.jp is live
        </div>
      </div>

      <ul class="checklist" id="cl-p4-2">
        <li data-id="p4-2-a" onclick="toggleCheck(this)">
          <span class="check-box"></span>
          <code>deploy</code> user created with sudo rights
        </li>
        <li data-id="p4-2-b" onclick="toggleCheck(this)">
          <span class="check-box"></span>
          SSH login works as <code>deploy</code> (no password)
        </li>
        <li data-id="p4-2-c" onclick="toggleCheck(this)">
          <span class="check-box"></span>
          <code>docker ps</code> shows caddy + nginx containers running
        </li>
        <li data-id="p4-2-d" onclick="toggleCheck(this)">
          <span class="check-box"></span>
          <code>https://domain.xvps.jp</code> loads with valid TLS cert
        </li>
      </ul>
    </div>
  </div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!--  RISK MATRIX                                                             -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="section" id="risks">
  <h2 class="section-title">Risk Matrix &amp; Opportunity Cost Analysis</h2>

  <!-- Mermaid quadrant chart -->
  <h3 style="color:var(--purple); margin-bottom:12px; font-size:14px;">â—† Risk Quadrant</h3>
  <div class="mermaid-wrap">
    <div class="mermaid">
quadrantChart
    title Risk Assessment Matrix
    x-axis Low Probability --> High Probability
    y-axis Low Impact --> High Impact
    quadrant-1 Monitor Closely
    quadrant-2 Critical Risks
    quadrant-3 Low Priority
    quadrant-4 Likely But Manageable
    DNS propagation delay: [0.75, 0.6]
    rm -rf from bad prompt: [0.2, 0.95]
    Python dependency hell: [0.85, 0.5]
    SSH key exposure: [0.1, 0.9]
    Caddy cert failure: [0.6, 0.55]
    OS package conflicts: [0.7, 0.45]
    </div>
  </div>

  <h3 style="color:var(--purple); margin:24px 0 12px; font-size:14px;">â—† Detailed Risk Register</h3>

  <table class="risk-table">
    <thead>
      <tr>
        <th>Risk</th>
        <th>Category</th>
        <th>Probability</th>
        <th>Impact</th>
        <th>Mitigation</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Python OS-level install conflicts</td>
        <td><span class="risk-high">[FACT]</span></td>
        <td><span class="risk-high">HIGH</span></td>
        <td><span class="risk-med">MEDIUM</span></td>
        <td>Use <code>mise</code> or <code>pyenv</code> exclusively</td>
      </tr>
      <tr>
        <td>DNS not propagated â†’ Caddy cert failure</td>
        <td><span class="risk-unk">[UNCERTAIN]</span></td>
        <td><span class="risk-med">MEDIUM</span></td>
        <td><span class="risk-med">MEDIUM</span></td>
        <td>Verify with <code>dig</code> before starting Caddy</td>
      </tr>
      <tr>
        <td><code>--dangerously-skip-permissions</code> catastrophic command</td>
        <td><span class="risk-high">[FACT]</span></td>
        <td><span class="risk-low">LOW</span></td>
        <td><span class="risk-high">CRITICAL</span></td>
        <td>Git commit before running; require command preview in prompt</td>
      </tr>
      <tr>
        <td>SSH private key leaked in repo</td>
        <td><span class="risk-high">[FACT]</span></td>
        <td><span class="risk-low">LOW</span></td>
        <td><span class="risk-high">CRITICAL</span></td>
        <td>Add <code>*.pem</code> to <code>.gitignore</code>; never commit keys</td>
      </tr>
      <tr>
        <td>gh SSH key not matching VPS authorized_keys</td>
        <td><span class="risk-med">[HIGH PROB]</span></td>
        <td><span class="risk-low">LOW</span></td>
        <td><span class="risk-low">LOW</span></td>
        <td>Verify with <code>gh ssh-key list</code> after setup</td>
      </tr>
    </tbody>
  </table>

  <!-- Opportunity cost diagram -->
  <h3 style="color:var(--purple); margin:32px 0 12px; font-size:14px;">â—† Opportunity Cost â€” Manual vs AI-Delegated</h3>
  <div class="mermaid-wrap">
    <div class="mermaid">
gantt
    title Manual vs AI-Delegated Setup Time
    dateFormat HH:mm
    axisFormat %H:%M

    section Manual Approach
    Research + documentation     :manual1, 00:00, 60m
    Install tools one by one     :manual2, after manual1, 45m
    SSH key setup (trial/error)  :manual3, after manual2, 30m
    VPS contract + configure     :manual4, after manual3, 30m
    Docker install + debug       :manual5, after manual4, 60m
    Caddy config + TLS debug     :manual6, after manual5, 90m

    section AI-Delegated (This Guide)
    Phase 1-2 setup (local)      :ai1, 00:00, 20m
    Phase 3 VPS contract         :ai2, after ai1, 15m
    Phase 4 Claude executes all  :ai3, after ai2, 15m
    </div>
  </div>

  <div class="ascii-diagram">
  PRINCIPLE SUMMARY
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  [æ€è€ƒ1] å®£è¨€çš„ã‚¤ãƒ³ãƒ•ãƒ©ç®¡ç† (Declarative Infrastructure)
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚  server.md + skills/ = Single Source of Truth      â”‚
           â”‚  Human remembers NOTHING â†’ Files remember EVERYTHINGâ”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  [æ€è€ƒ2] ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸éš”é›¢ (Dependency Isolation)
           OS Python  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ NEVER TOUCH
           mise envs  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ALWAYS USE
           Docker     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ FOR SERVICES

  [æ€è€ƒ3] ãƒªã‚¹ã‚¯ã¨é€Ÿåº¦ã®ãƒãƒ©ãƒ³ã‚¹ (Risk vs Speed Tradeoff)
           Autonomy â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Speed
           â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Control/Safety
                         â–²
                    You are HERE
                    (with proper safeguards)

  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  </div>
</section>
</div><!-- /container -->

<!-- â”€â”€â”€ FOOTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<footer>
  <div class="container">
    <p>VPS Setup Guide Â· AI-Driven Infrastructure Â·
      Built for <a href="https://pages.github.com">GitHub Pages</a>
    </p>
    <p style="margin-top:8px; font-size:11px;">
      Powered by
      <a href="https://mermaid.js.org">Mermaid.js</a> Â·
      Terminal dark theme Â·
      No build tools required
    </p>
  </div>
</footer>

<!-- â”€â”€â”€ SCRIPTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<script>
  /* â”€â”€ Mermaid init â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  mermaid.initialize({
    startOnLoad: true,
    theme: 'dark',
    themeVariables: {
      darkMode: true,
      background:     '#161b22',
      primaryColor:   '#1a2d3a',
      primaryBorderColor: '#58a6ff',
      primaryTextColor:   '#e6edf3',
      secondaryColor: '#1a2d1a',
      tertiaryColor:  '#21262d',
      lineColor:      '#8b949e',
      textColor:      '#e6edf3',
      edgeLabelBackground: '#21262d',
      clusterBkg:     '#161b22',
      clusterBorder:  '#30363d',
    },
    flowchart: { curve: 'basis', htmlLabels: true },
    sequence: {
      actorFontFamily: 'Courier New',
      messageFontFamily: 'Courier New',
      noteFontFamily: 'Courier New',
    }
  });

  /* â”€â”€ Tab navigation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  const tabs = document.querySelectorAll('.nav-tab');
  const sections = document.querySelectorAll('.section');

  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      const target = tab.dataset.target;
      tabs.forEach(t => t.classList.remove('active'));
      sections.forEach(s => s.classList.remove('active'));
      tab.classList.add('active');
      document.getElementById(target).classList.add('active');
    });
  });

  /* â”€â”€ Card toggle â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  function toggleCard(id) {
    document.getElementById(id).classList.toggle('collapsed');
  }

  /* â”€â”€ Checklist + progress â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  const STATE_KEY = 'vps-setup-checklist';
  let state = {};

  function loadState() {
    try { state = JSON.parse(localStorage.getItem(STATE_KEY) || '{}'); }
    catch(e) { state = {}; }
  }

  function saveState() {
    localStorage.setItem(STATE_KEY, JSON.stringify(state));
  }

  function toggleCheck(li) {
    const id = li.dataset.id;
    state[id] = !state[id];
    saveState();
    applyState(li, state[id]);
    updateProgress();
  }

  function applyState(li, done) {
    const box = li.querySelector('.check-box');
    if (done) {
      li.classList.add('done');
      box.textContent = 'âœ“';
    } else {
      li.classList.remove('done');
      box.textContent = '';
    }
  }

  function updateProgress() {
    const all  = document.querySelectorAll('[data-id]');
    const done = Array.from(all).filter(li => state[li.dataset.id]).length;
    const total = all.length;
    const pct   = total ? Math.round(done / total * 100) : 0;

    document.getElementById('pct').textContent       = pct + '%';
    document.getElementById('progressFill').style.width = pct + '%';
    document.getElementById('doneCount').textContent  = done;
    document.getElementById('totalCount').textContent = total;
  }

  function restoreChecklist() {
    document.querySelectorAll('[data-id]').forEach(li => {
      if (state[li.dataset.id]) applyState(li, true);
    });
    updateProgress();
  }

  /* â”€â”€ Copy to clipboard â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  function copyCode(btn) {
    const code = btn.nextElementSibling.querySelector('code').textContent;
    navigator.clipboard.writeText(code).then(() => {
      btn.textContent = 'COPIED!';
      btn.classList.add('copied');
      setTimeout(() => {
        btn.textContent = 'COPY';
        btn.classList.remove('copied');
      }, 1800);
    });
  }

  /* â”€â”€ Init â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  loadState();
  restoreChecklist();
</script>

</body>
</html>
